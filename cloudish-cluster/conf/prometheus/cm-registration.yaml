apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1beta1.custom.metrics.k8s.io
spec:
  # this tells the aggregator how to verify that your API server is
  # actually who it claims to be
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNE1EUXlOVEV4TXpVd01Gb1hEVEk0TURReU1qRXhNelV3TUZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTEI0CnFRbGpJMHVNbU5BZTBKZXFleW1oR3ZLOXV6SmRrRFczT3VvMjJhTS9JZXVnMTlMbU1hMUJmK1pUS1hmZlVTdWoKbStKWEEzeGxneVViRlM2Z24ycHBpRjZlZU9HbzhpSk01Rlk0Nm5Wd1dYZ2FUVTVVRXF4Nm9PUGhyMlBSMjdiQwpwUGZEclBoZHhkd2lqRjl5UE5wb0lrU3RZVm9GUHhBaGg4UXlSMmpQdWtubWtic0dCa2oyZUVhck14Q2U1NERsCkRwR0JjK3lxdEFUUkVBMGJxQURtQzY0OVYwSWRnam5XVDJ2VGZZVUlRUFg2dW1ZYkZvbkRSMXNoTVk5WVhmQ0wKc25WYzNPRHFpRGFraEhvSVhqbFk2UFRGVW9jaHZTbzR3VXBDc1Z3R2xCVjFuNklEc2ovd3ZvNWpSL3VzczFzNgpaUnk0SEkxUjB5bzZPRDBDQXZVQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFLL2pMYVVST3hOSjhsMkRnV3RVMUZ5K0RCdFEKZUFleG1OSzUvMFoyczR1bnN5bXgzaUpLa2Vzcmx5Zi9CYjVaaGF3Q2ZWSjJnaFEvdkVMbExFWHpHVHUwZXJGMgp1WitWeUU3N0V1ano4QXlhbXRLTHgzTDlaQUJMVElsSHhOblR6RnRoeEh0RTFqc29TbzhnMlA2dlFMVm1Nb0dUCjR2WmJSbDlILzF3bUFHUEZhaE5NZGgrek1BaFBaZXpTdVhDUlFhcDhrdlBkbms5aFRiY2JDZWc0VHVDUGJuVmoKSDlsbmRPeWpCVTduTVdOaWtNTGtuekIrSWNWWEE1OFJneHY1R0VtZlBub1ZQanBycjFaVGxFaXJycXM3V0VPTQplaWVOcEJKV2k1NGZxSmFwMDVSSDZpZC9OemNxZDRPeWRyeWplVHhtQkx3OWZUY0dCZXZGSlZpOVp5OD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo= 
  # these specify which group and version you're registering the API
  # server for
  group: custom.metrics.k8s.io
  version: v1beta1
  # these control how the aggregator prioritizes your registration.
  # it's not particularly relevant in this case.
  groupPriorityMinimum: 1000
  versionPriority: 10
  # finally, this points the aggregator at the service for your
  # API server that you created
  service:
    name: prometheus
    namespace: prom
