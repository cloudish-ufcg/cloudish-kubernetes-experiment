apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1beta1.custom.metrics.k8s.io
spec:
  # this tells the aggregator how to verify that your API server is
  # actually who it claims to be
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNE1ETXhOREF5TlRNeU4xb1hEVEk0TURNeE1UQXlOVE15TjFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTkpVClBFZm9XZ1VaYzlTUkpFZDRRZ0tYM3RGQVRqblhqV0tHeVBZSjhkVW1zMGp5d094Yit2QnMyWUtWbTNNbzQrZ2EKS0xRWUFZYXBZM3ZYUnVxeW5mVWdBS21MR1lnWkFsTVJSTDFhMFgvamJqbSttakJVNmRCM1NkUDQ5ZmhPeWxtKwpCMmtOR1JMTGdxL20wd1lmRkVKaG5YWDNIdllTVWNiVDVRc1RGS0FhOHFKQmlOT3RxWXRrVVdmOTlmT3o3M0FoCmRqWnlhKzVTbFBJdlhOQysyR3lXK3NNblZ3THZ0cHNaZysvTnZJZlBaQlAzODdUa3dLYVltMlZaN0JIcWVtMTAKZ0JMWUZjaDRmR0RiRFdLYVMwNzg0WCtuNnZSaEZ1dlFPa0N6d0l0bHZPU2pYUXpEdlBxVGsremdLTi91SUJuRgpMVnA0T0RrejVqR2tOM2FzME1zQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFBZ3E1MFdiSjVibmVLY3JGempjMk9RaWRGcVkKZlRBVjRaUG9zRVdsaStJLzBJaEQwSVZaSEVjTkhmTnp3UHpMVUZaaG5tSlJyWitnMGRyNTBLR0ZOSFh3Rm1FZwo0NWtjemRWcUJwM2gyaDFvd3B2enNDUFZPb2Vmb1lSWndGUlFjdWFxYkNraUcwUjNZMmxmTndMYWhhb24yQ0JkCkdHU2hxWktibFJNaVR0eHJscmRPdE5tcmo2Q3hjTTFvTk53dGFzcXdCczNlWU4xckxzdzZrOExMZ0FVZEY1RW8KQ0RJL3VnOEJmN2ZRc1d3N0JMOFYyZlRnRTRPVnU0N3ZaZmFEZlVXTmV2aytmQXRpUGFKU1RLdDArLzRGWllDTAo3VFJqSFMzNlpPeXVxV0pVOCtja1BTdWVIYUt4bFpodEVBYlI3ajRUbEkvcjJSMzZ0NXp4UUNheCtycz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo= 
  # these specify which group and version you're registering the API
  # server for
  group: custom.metrics.k8s.io
  version: v1beta1
  # these control how the aggregator prioritizes your registration.
  # it's not particularly relevant in this case.
  groupPriorityMinimum: 1000
  versionPriority: 10
  # finally, this points the aggregator at the service for your
  # API server that you created
  service:
    name: prometheus
    namespace: prom
